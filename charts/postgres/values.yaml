# https://github.com/bitnami/charts/blob/main/bitnami/postgresql/values.yaml

global:
  postgresql:
    postgresqlDatabase: "resume"

postgresql:
  image:
    tag: "15.3.0-debian-11-r15"

  replication:
    enabled: false
  backup:
    enabled: false

  resources:
    requests:
      cpu: 10m
      memory: 64Mi
    limits:
      cpu: 50m
      memory: 128Mi

  persistence:
    enabled: true
    existingClaim: "db-storage"

  service:
    type: ClusterIP

  livenessProbe:
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 6
  readinessProbe:
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 10m
    labels: { Prometheus }
    scrapeTimeout: 10s
    selector: { pgsql }

networkPolicy:
  enabled: true

# Initialize the database with SQL scripts from a secret
primary:
  initdb:
    scriptsSecret: postgresql-init-secret

# Set the POSTGRESQL_PASSWORD environment variable
extraEnvVarsSecret:
  name: postgresql-secret
  key: postgresql-password
